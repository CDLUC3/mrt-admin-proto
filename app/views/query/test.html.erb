<h1><%= title %>! </h1>

<%= link_to("Home", :controller => :menu, :action => :index) %>
<h2><%= data.length %> Results</h2>

<div class="results">
<table class="results sortable">
  <thead>
  <tr class="header">
    <%
    headers.each_with_index do |header, c|
      cname = types[c]
      if cname == 'data' || cname == 'dataint'
      %>
          <th class="sorttable_numeric"><%= header %></th>
      <%
      else
      %>
          <th><%= header %></th>
      <%
      end
    end
    %>
  </tr>
  </thead>
  <tbody>
  <%
  data.each do |row|
  %>
    <tr class="row">
      <%
      row.each_with_index do |col, c|
        cname = types[c]
      %>
        <td class="cell <%= cname %>">
        <% if (cname == 'data') %>
          <%= number_with_delimiter(col, delimiter: ',') %>
        <% elsif (cname == 'dataint') %>
          <%= number_with_delimiter(number_with_precision(col, precision: 0), delimiter: ',') %>
        <% elsif (cname == 'datasize') %>
          <%= number_to_human_size(col) %>
        <% elsif (cname == 'node') %>
          <%= link_to(col, :controller => :query, :action => :coll_nodes, :node => col) %>
        <% elsif (cname == 'own') %>
          <%= link_to(col, :controller => :query, :action => :owners_coll, :own => col) %>
        <% elsif (cname == 'mime') %>
          <%= link_to(col, :controller => :query, :action => :coll_mime_types, :mime => col) %>
        <% elsif (cname == 'coll') %>
          <%= link_to(col, :controller => :query, :action => :coll_details, :coll => col) %>
        <% elsif (cname == 'ark') %>
          <%= link_to(col, arkLink(col)) %>
        <% elsif (cname == 'mnemonic') %>
          <%= link_to(col, collLink(col)) %>
        <% else %>
          <%= col %>
        <% end %>
        </td>
      <%
      end
      %>
    </tr>
  <%
  end
  %>
  </tbody>
</table>
</div>
